let url=document.location.hostname,isProd="www.celtx.com"===url;const KM_ACCOUNT=isProd?"3a840c9fd2fd947bd21cbfa411278a31bad94f93":"72e7fc4f68e577c84cb6d308aef96026f42638ed",GA_ACCOUNT=isProd?"UA-3808091-6":"UA-3808091-11";function toggleSubNav(e){let t=e,n=document.getElementsByTagName("header")[0],o=n.querySelector(".top-nav__children"),i=t.parentElement.querySelector(".top-nav__section").innerHTML;if(document.body.clientWidth>1150)if(t.classList.contains("top-nav__item--expanded"))t.classList.remove("top-nav__item--expanded"),o.innerHTML="",o.classList.remove("top-nav__children--expanded"),n.classList.remove("expanded");else{let e=document.getElementsByClassName("top-nav__item");[].forEach.call(e,(function(e){e.classList.remove("top-nav__item--expanded")})),t.classList.add("top-nav__item--expanded"),o.innerHTML=i,o.classList.contains("top-nav__children--expanded")||o.classList.add("top-nav__children--expanded"),n.classList.contains("expanded")||n.classList.add("expanded")}else toggleMobileNavSection(t)}function toggleMobileNavSection(e){let t=$(e).parent();t.hasClass("expanded")?t.removeClass("expanded"):(t.siblings().removeClass("expanded"),t.addClass("expanded"))}function showMobileNav(){document.getElementsByClassName("top-nav__sections")[0].classList.toggle("top-nav__sections--mobile-nav")}function showSignupModule(){document.getElementById("signup-module").classList.add("signup-module--show")}function hideSignupModule(){document.getElementById("signup-module").classList.remove("signup-module--show")}function authenticateGoogleUser_(e){let t=$.Deferred();return $.ajax({url:"/auth/sso/google",type:"POST",data:JSON.stringify({id_token:e.credential}),dataType:"json",contentType:"application/json"}).fail((function(e){t.reject(e.responseText)})).done((function(e){t.resolve(e),console.log(e)})),t}function onGSignIn(e){authenticateGoogleUser_(e).fail((function(e){console.log(`Login failed - ${e}`)})).done((function(){cx.auth.isLoggedIn().fail((function(){})).then((function(e){e&&successfulGSignIn()}))}))}function goToStudio(){window.location.href="/a/ux/"}async function onMSignIn(){try{await authenticateMicrosoftUser_(),await cx.auth.isLoggedIn()&&goToStudio()}catch(e){console.log("Login failed")}}function onMSignInKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),onMSignIn())}function authenticateMicrosoftUser_(){let e=new URL(window.location.href),t=null,n=null;switch(!0){case"celtx.com"===e.hostname:case"www.celtx.com"===e.hostname:t="f0909279-bfa4-4995-a7b0-f359232978da",n="https://www.celtx.com";break;case!!e.hostname.match(/(d|dev|devprod)[0-9]*.celtx.com/):case"localhost"===e.hostname:t="06eb854d-9832-400e-b9ce-172447ac701d",n=`https://${e.hostname}`}return new Promise((async(e,o)=>{let i=new msal.PublicClientApplication({auth:{clientId:t,authority:"https://login.microsoftonline.com/common",redirectUri:n}}),a=await i.loginPopup({scopes:["User.Read","email","profile"]});$.ajax({url:"/auth/sso/microsoft",type:"POST",data:JSON.stringify({id_token:a.idToken}),dataType:"json",contentType:"application/json"}).fail((function(e){o(e.responseText)})).done((function(t){e(t)}))}))}function checkFormSectionValidity(e,t){var n=!0;return $req=t.find("input[required]"),$req.each((function(){this.validity.valid||(n=!1,$(this).addClass("input-error"),showError($(".signup-bigask-form .message"),"MISSING OR INVALID EMAIL",t.find("input[required]")),$(this).one("change",(function(){$(this).removeClass("input-error"),hideError($(".signup-bigask-form .message"))})))})),n||(e.one("submit",(function(e){e.preventDefault()})),$inputSubmit=e.find('input[type="submit"]'),$inputSubmit.length>0?$inputSubmit.click():e.submit()),n}!function(){this.cx={auth:{isLoggedIn:function(){return $.get("/auth/check").then((function(){return!0}))},requestPasswordReset:function(e,t){var n=$.Deferred();return $.ajax({url:"/auth/reset",type:"POST",data:JSON.stringify({email:e,code:t}),dataType:"json",contentType:"application/json"}).fail((function(e){var t;t="application/json"===e.getResponseHeader("content-type")?(t=JSON.parse(e.responseText)).error:e.responseText,n.reject(t)})).done((function(e){n.resolve(e)})),n},updatePassword:function(e){var t=$.Deferred();return $.ajax({url:"/feeds/metadata/default",type:"PUT",data:JSON.stringify({password:e}),dataType:"json",contentType:"application/x-celtx-doc+json"}).fail((function(e){t.reject(e.responseText)})).done((function(e){t.resolve(e)})),t},signup:function(e,t,n){var o="email",i="gem",a="subscribe";if(e.indexOf("+")>=0)return $.Deferred().reject("Email address can't contain '+'");var r={};r[o]=e,r[a]=1,t&&(r[i]=1);var c=$.Deferred();return $.ajax({url:"/auth/register",type:"POST",data:JSON.stringify(r),dataType:"json",contentType:"application/json"}).fail((function(e){var t;t="application/json"===e.getResponseHeader("content-type")?(t=JSON.parse(e.responseText)).error:e.responseText,c.reject(t)})).done((function(e){c.resolve(e)})),c}}}}(window),document.addEventListener&&window.addEventListener("load",(function(){for(var e=document.getElementsByTagName("a"),t=function(){this.hiddenTitle=this.title,this.title=""},n=function(){this.title=this.hiddenTitle,this.title=this.hiddenTitle,this.hiddenTitle=null},o=0;o<e.length;++o)e[o].addEventListener("mouseover",t),e[o].addEventListener("mouseout",n);for(var i in e)if(e.hasOwnProperty&&e.hasOwnProperty(i)&&e[i].getAttribute){var a=e[i].getAttribute("href");window.location.pathname.match(a)&&a.length<=window.location.pathname.length&&!e[i].className.match("zesty_link")&&"/"!=a&&"crumb"!=e[i].parentNode.className&&(e[i].className+=" at")}})),function(e,t){function n(){var e=f.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=p[e[u]];return t||(t={},m++,e[u]=m,p[m]=t),t}function i(e,n,i){return n||(n=t),c?n.createElement(e):(i||(i=o(n)),(n=i.cache[e]?i.cache[e].cloneNode():l.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e)).canHaveChildren&&!d.test(e)?i.frag.appendChild(n):n)}function a(e){e||(e=t);var a=o(e);if(f.shivCSS&&!r&&!a.hasCSS){var s,d=e;s=d.createElement("p"),d=d.getElementsByTagName("head")[0]||d.documentElement,s.innerHTML="x<style>article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}</style>",s=d.insertBefore(s.lastChild,d.firstChild),a.hasCSS=!!s}return c||function(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return f.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,(function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'}))+");return n}")(f,t.frag)}(e,a),e}var r,c,s=e.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,l=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,u="_html5shiv",m=0,p={};!function(){try{var e,n=t.createElement("a");if(n.innerHTML="<xyz></xyz>",r="hidden"in n,!(e=1==n.childNodes.length)){t.createElement("a");var o=t.createDocumentFragment();e=void 0===o.cloneNode||void 0===o.createDocumentFragment||void 0===o.createElement}c=e}catch(e){c=r=!0}}();var f={elements:s.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",version:"3.6.2pre",shivCSS:!1!==s.shivCSS,supportsUnknownElements:c,shivMethods:!1!==s.shivMethods,type:"default",shivDocument:a,createElement:i,createDocumentFragment:function(e,i){if(e||(e=t),c)return e.createDocumentFragment();for(var a=(i=i||o(e)).frag.cloneNode(),r=0,s=n(),d=s.length;r<d;r++)a.createElement(s[r]);return a}};e.html5=f,a(t)}(this,document),$(document).on("mouseup touchend",(function(e){e.stopPropagation(),header=$(document.getElementsByTagName("header")[0]),header.is(e.target)||0!==header.has(e.target).length||(header.removeClass("expanded"),$(".top-nav__item").removeClass("top-nav__item--expanded"),$(".top-nav__children").removeClass("top-nav__children--expanded"),$(".top-nav__sections").removeClass("top-nav__sections--mobile-nav"))})),["load","zoom","resize","scroll"].forEach((function(e){window.addEventListener(e,(function(){document.body.clientWidth<=1150||$(window).scrollTop()>50?$("header").addClass("scroll-active"):$("header").removeClass("scroll-active")}),!1)})),successfulGSignIn=function(){goToStudio()};var updateInputs=function(e,t){$.each(e,(function(e,n){n&&($(n).hasClass("perma-disabled")||$(n).attr("disabled",t))}))},showError=function(e,t,n){var o=t.toUpperCase();o.indexOf("IS NOT AVAILABLE")>=0&&(n.addClass("input-error"),n.focus()),"INVALID EMAIL"===o.substring(0,13)?(o="The email address you've entered is invalid.",n.addClass("input-error"),n.focus()):"MISSING OR INVALID EMAIL"===o?(o="Please enter a valid email address.",n.addClass("input-error"),n.focus()):o.indexOf("EMAIL ADDRESS CAN'T CONTAIN")>=0?(n.addClass("input-error"),n.focus(),o=t):o=-1!=o.indexOf("IS NOT AVAILABLE")?"This account already exists. <a href='/a/ux/logon'>Log In</a>":t,e.html(o),e.css("visibility","visible")},loggedIn=function(){"/"!==window.location.pathname&&"/index.html"!==window.location.pathname||goToApplication()},goToApplication=function(){window.location.href="/a/ux"},signupSuccess=function(e,t){_gaq.push(["_trackEvent","Login","Create Account"]);try{cxaid=cxGetCookie("cx_trka"),"function"!=typeof window.metF?(window._mFa=void 0!==window._mFa&&window._mFa instanceof Array?window._mFa:[],window._mFa.push({0:"checker",1:"add",2:{cookieValue:cxaid}})):window.metF("checker","add",{cookieValue:cxaid})}catch(e){}window.location.href="/a/ux/signup?token="+encodeURIComponent(t)+"&email="+encodeURIComponent(e)},validate=function(e,t){var n=!1;return e.val().length<=0&&(e.addClass("error"),e.focus(),showError(t,"Please enter your email address."),n=!0),n},hideError=function(e){e.css("visibility","hidden")},setupForm=function(e,t,n,o,i){t.bind("keypress",(function(){$(this).removeClass("error"),hideError(o)}));var a=[t,n];e.submit((function(i){window.formSubmitted||(window.formSubmitted=!0,n.prop("disabled",!0),window.setTimeout((function(){window.formSubmitted=!1,n.prop("disabled",!1)}),500),i.preventDefault(),hideError(o),checkFormSectionValidity(e,e)&&(updateInputs(a,!0),cx.auth.signup(t.val()).fail((function(e){showError(o,e,t),updateInputs(a,!1)})).done((function(e){signupSuccess(t.val(),e.token,!0)}))))})),n.click((function(t){t.preventDefault(),e.submit()}))},setupSignup=function(){$(".signup-bigask-form").each((function(){setupForm($(this),$(this).find('*[name="username"]'),$(this).find(".signup-submit-btn"),$(this).find(".message"),$(this).find(".loader"))}))};function toggleAccordion(e){let t=$(e.target).parent();t.hasClass("product-features__item--expanded")?t.removeClass("product-features__item--expanded"):(t.siblings().removeClass("product-features__item--expanded"),t.addClass("product-features__item--expanded"))}function showTooltip(e){e.stopPropagation(),e.preventDefault();let t=$(".tooltip"),n=$(e.target),o=n.data("tooltip-title"),i=n.data("tooltip-description");console.log(n),t.find(".tooltip__title").text(o),t.find(".tooltip__description").text(i),document.body.getAttribute("data-tooltip")||document.body.setAttribute("data-tooltip",!0),positionTooltip(t,n)}function positionTooltip(e,t){var n=t.offset(),o=e.outerWidth(),i=e.outerHeight(),a=document.documentElement.clientWidth,r=(document.documentElement.scrollTop,n.top-i),c=n.left-o/2+8;a-(c+o)<0&&(c=a-o),e.offset({left:c,top:r})}function closeTooltip(e){e.preventDefault(),e.stopPropagation(),document.body.removeAttribute("data-tooltip"),$(".tooltip__title").text(""),$(".tooltip__content").text("")}cx.auth.isLoggedIn().fail((function(){})).then((function(e){e&&loggedIn()})),$(document).ready((function(){setupSignup(),$('input[type="submit"], .signup-submit-btn').removeAttr("disabled")}));var _gaq=_gaq||[];_gaq.push(["_setAccount",GA_ACCOUNT]),_gaq.push(["_setDomainName","celtx.com"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var _kmq=_kmq||[],_kmk=_kmk||KM_ACCOUNT;function _kms(e){setTimeout((function(){var t=document,n=t.getElementsByTagName("script")[0],o=t.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,n.parentNode.insertBefore(o,n)}),1)}_kms("//i.kissmetrics.com/i.js"),_kms("//scripts.kissmetrics.com/"+_kmk+".2.js");const QA_TTL=36e5;let kp=window._kmq.push;const devHostRegExp=/^(d3|dev([^.]+)|www\.local|gem\.local)\.celtx\.com$/,hostname=document.location.hostname;if("localhost"===hostname||devHostRegExp.test(hostname)){const e=function(e){var t=e.length;if(t>0){for(var n=new Array(t),o=0;o<t;o++)n[o]=e[o];return n}return[]};window._kmq.push=function(t){let n=e(t);kp.apply(this,Array.prototype.slice.call(arguments));try{const e=Date.now(),t="qaKm::"+window.localStorage.length,o=JSON.stringify({data:n,creation:e,expiration:e+QA_TTL});window.localStorage.setItem(t,o);const i="qaKm::bounded-collectable-storage",a=[];for(let e=0;e<window.localStorage.length;e++){let t=localStorage.key(e);i!==t&&(t.startsWith("qaKm::")&&a.push(t.substring(6)))}window.localStorage.setItem(i,JSON.stringify({data:a,creation:e}))}catch(e){console.log(e)}}.bind(window._kmq)}function emitVisitedSiteEventIfNeeded(){try{var e="max-age=1800";if(document.cookie.match(/cx_trkvst=/g))return void(window.document.cookie="cx_trkvst=t;"+e+";path=/");window.document.cookie="cx_trkvst=t;"+e+";path=/";var t=!1;e="max-age=157680000",document.cookie.match(/cx_trknwn=/g)?(window.document.cookie="cx_trknwn=y;"+e+";path=/",t=!0):window.document.cookie="cx_trknwn=n;"+e+";path=/";var n={returning:t?"yes":"no",new_or_returning:t?"returning":"new"};window.document.referrer&&window.document.referrer.length&&(n.referrer=window.document.referrer),n.URL=window.document.location.href,window.screen?n["Screen Resolution"]=window.screen.width+"x"+window.screen.height:n["Screen Resolution"]="noscreen";var o=(new Intl.DateTimeFormat).resolvedOptions();n.tz=""+o.timeZone,n.Locale=""+o.locale,window._trkq.push(["record","Visited Site",n])}catch(e){}}function cxGetCookie(e){try{if(!document.cookie.match(/cx_trka=/g)){const e=window.crypto.getRandomValues(new Uint32Array(1))[0];var t=new Date,n="w"+e.toString(16)+t.getTime()+"=";window.document.cookie="cx_trka="+n+";max-age=157680000;path=/"}}catch(e){}try{return document.cookie.substring(document.cookie.indexOf(e+"=")+1+e.length).split(";")[0]}catch(e){}return""}!function(e,t,n,o){if(!e.getElementById(n)){var i=e.createElement(t),a=e.getElementsByTagName(t)[0];i.id=n,i.src="//js.hs-analytics.net/analytics/"+Math.ceil(new Date/o)*o+"/2041435.js",a.parentNode.insertBefore(i,a)}}(document,"script","hs-analytics",3e5),function(e,t,n,o,i){e[o]=e[o]||[],e[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],r=t.createElement(n);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-MHGMDK6",a.parentNode.insertBefore(r,a)}(window,document,"script","dataLayer"),function(e,t,n,o,i,a,r){e.ProfitWellObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(n),r=t.getElementsByTagName(n)[0],a.async=1,a.src="https://dna8twue3dlxq.cloudfront.net/js/profitwell.js",r.parentNode.insertBefore(a,r)}(window,document,"script",0,"profitwell"),profitwell("auth_token","9938daee948f0bdf01a5006ed0b180ee");try{window._trkq=window._trkq||[];let e=window._trkq.push;window._trkq.push=function(t){e.apply(this,Array.prototype.slice.call([t]));let n=""+t[1],o={},i=Object.keys(t[2]?t[2]:{});for(var a=0;a<i.length;a++)o[i[a]]=t[2][i[a]];try{let e="//trk.celtx.com/";/^(www\.|gem\.)?celtx\.com$/.test(document.location.hostname)?o._k="3a840c9fd2fd947bd21cbfa411278a31bad94f93":o._k="72e7fc4f68e577c84cb6d308aef96026f42638ed",o._p=cxGetCookie("cx_trka"),o._n=n;let t=new Date;o._t=t.getTime()/1e3,window.document.referrer&&window.document.referrer.length&&(o.referrer=window.document.referrer),e+="e";let i=Object.keys(o).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(o[e]))).join("&"),a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(i)}catch(e){}emitVisitedSiteEventIfNeeded()}.bind(window._trkq)}catch(e){console.log(e)}function kmTriggeredEvent(e,t){try{window._kmq.push(["record",e,t])}catch(e){}try{window._trkq.push(["record",e,t])}catch(e){}}function _isMobile(){return/iphone|ipod|android|ie|blackberry|fennec/.test(navigator.userAgent.toLowerCase())}$("document").ready((function(){kmTriggeredEvent("Page Visit",{URL:window.location.href});var e=function(){for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<n.length;o++)e=n[o].split("="),t.push(e[0]),t[e[0]]=e[1];return t}();e.includes("mgnt")&&""!=e.mgnt&&kmTriggeredEvent("Clicked Through To WWW From Lead Magnet",{"Lead Magnet Page":decodeURIComponent((e.mgnt+"").replace(/\+/g,"%20"))})})),ire("identify",{customerId:"",customerEmail:""}),function(){let e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//cdnt.netcoresmartech.com/smartechclient.js";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);let n=window.location.host,o="c8692c7b106688e927a81a9d5e90df22";"www.celtx.com"==n&&(o="df912bec77eed4fe2662b35ae7212f16"),setTimeout((function(){smartech("create","ADGMOT35CHFLVDHBJNIG50K96B1BH2LHREB8SJV5J4OAMAQLDC5G"),smartech("register",o),smartech("identify",""),smartech("dispatch","page browse",{origin:window.location.origin,pathname:window.location.pathname,search:window.location.search})}),500)}();